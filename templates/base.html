<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="UTF-8">
    <title>{% block title %}Smarty v5{% endblock %}</title>
    <meta name="description" content="...">

    <meta name="viewport" content="width=device-width, maximum-scale=5, initial-scale=1">

    <!-- up to 10% speed up for external res -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com/">
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/">
    <!-- preloading icon font is helping to speed up a little bit -->
    <link rel="preload" href="{{ url_for('static', filename='fonts/flaticon/Flaticon.woff2') }}" as="font" type="font/woff2" crossorigin>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/core.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/vendor_bundle.min.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap">

    <!-- favicon - optional -->
    <!-- <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}"> -->

    {% block head %}{% endblock %}
  </head>

  <body class="layout-admin aside-sticky bg-lime header-sticky" data-s2t-class="btn-primary btn-sm bg-gradient-default rounded-circle border-0">

    <div id="wrapper" class="d-flex align-items-stretch flex-column">

      <!--  header -->
      <header id="header" class="d-flex align-items-center shadow-xs">

        <!-- Navbar -->
        <div class="container-fluid position-relative">

          <nav class="navbar navbar-expand-lg navbar-light justify-content-between">

            <!-- logo, navigation toggler -->
            <div class="align-items-start">

              <!-- sidebar toggler -->
              <a href="#aside-main" class="btn-sidebar-toggle h-100 d-inline-block d-lg-none justify-content-center align-items-center p-2">
                <span>
                  <svg width="25" height="25" viewBox="0 0 20 20">
                    <path d="M 19.9876 1.998 L -0.0108 1.998 L -0.0108 -0.0019 L 19.9876 -0.0019 L 19.9876 1.998 Z"></path>
                    <path d="M 19.9876 7.9979 L -0.0108 7.9979 L -0.0108 5.9979 L 19.9876 5.9979 L 19.9876 7.9979 Z"></path>
                    <path d="M 19.9876 13.9977 L -0.0108 13.9977 L -0.0108 11.9978 L 19.9876 11.9978 L 19.9876 13.9977 Z"></path>
                    <path d="M 19.9876 19.9976 L -0.0108 19.9976 L -0.0108 17.9976 L 19.9876 17.9976 L 19.9876 19.9976 Z"></path>
                  </svg>
                </span>
              </a>

              <!-- logo : mobile only -->
              <a class="navbar-brand d-inline-block d-lg-none mx-2" href="{{ url_for('index') }}">
                <img src="{{ url_for('static', filename='images/logo/logo_sm.svg') }}" width="38" height="38" alt="...">
              </a>

            </div>

            <!-- navbar : navigation -->
            <div class="collapse navbar-collapse" id="navbarMainNav">

              <!-- navbar : mobile menu -->
              <div class="navbar-xs d-none">

                <!-- close button -->
                <button class="navbar-toggler pt-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMainNav" aria-controls="navbarMainNav" aria-expanded="false" aria-label="Toggle navigation">
                  <svg width="20" viewBox="0 0 20 20">
                    <path d="M 20.7895 0.977 L 19.3752 -0.4364 L 10.081 8.8522 L 0.7869 -0.4364 L -0.6274 0.977 L 8.6668 10.2656 L -0.6274 19.5542 L 0.7869 20.9676 L 10.081 11.679 L 19.3752 20.9676 L 20.7895 19.5542 L 11.4953 10.2656 L 20.7895 0.977 Z"></path>
                  </svg>
                </button>

                <!-- logo -->
                <a class="navbar-brand" href="{{ url_for('index') }}">
                  <img src="{{ url_for('static', filename='images/logo/logo_dark.svg') }}" width="110" height="38" alt="...">
                </a>

              </div>
              <!-- /navbar : mobile menu -->

              <!-- Dropdowns -->
              <ul class="navbar-nav align-items-center">
                {% block navbar %}
                <!-- Home -->
                <li class="nav-item dropdown">
                  <a class="nav-link" href="{{ url_for('index') }}">
                    Home
                  </a>
                </li>

                <!-- Users -->
                <li class="nav-item dropdown">
                  <a class="nav-link" href="{{ url_for('users') }}">
                    Users
                  </a>
                </li>

                <!-- Posts -->
                <li class="nav-item dropdown">
                  <a class="nav-link" href="{{ url_for('posts') }}">
                    Posts
                  </a>
                </li>


                <!-- More Options Dropdown -->
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="mainNavDropdown">
                    More
                  </a>

                  <ul class="dropdown-menu dropdown-menu-clean dropdown-fadeindown" aria-labelledby="mainNavDropdown">
                    <li class="dropdown-item"><a class="dropdown-link" href="#">Settings</a></li>
                    <li class="dropdown-item"><a class="dropdown-link" href="#">Reports</a></li>
                    <li class="dropdown-item"><a class="dropdown-link" href="#">Backup</a></li>
                    <li class="dropdown-item"><a class="dropdown-link" href="#">Import/Export</a></li>
                    <li class="dropdown-item"><a class="dropdown-link" href="#">API Keys</a></li>
                    <li class="dropdown-item"><a class="dropdown-link" href="#">Documentation</a></li>
                  </ul>
                </li>
                {% endblock %}
              </ul>
              <!-- /Dropdowns -->

            </div>
            <!-- /navbar : navigation -->

            <!-- options -->
            <ul class="list-inline list-unstyled mb-0 d-flex align-items-end">

              <!-- notifications -->
              <li class="list-inline-item mx-1 dropdown">

                <a href="#" id="dropdownNotificationOptions" class="btn btn-sm btn-light rounded-circle text-primary-hover dropdown-toggle" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false" aria-haspopup="true" aria-label="Notifications">

                  <!-- svg icon -->
                  <span style="margin-top: -3px;">
                    <svg width="24px" height="24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <path fill="currentColor" d="M17,12 L18.5,12 C19.3284271,12 20,12.6715729 20,13.5 C20,14.3284271 19.3284271,15 18.5,15 L5.5,15 C4.67157288,15 4,14.3284271 4,13.5 C4,12.6715729 4.67157288,12 5.5,12 L7,12 L7.5582739,6.97553494 C7.80974924,4.71225688 9.72279394,3 12,3 C14.2772061,3 16.1902508,4.71225688 16.4417261,6.97553494 L17,12 Z"></path>
                        <rect fill="#000000" opacity="0.3" x="10" y="16" width="4" height="4" rx="2"></rect>
                      </g>
                    </svg>
                  </span>

                </a>

                <div aria-labelledby="dropdownNotificationOptions" class="dropdown-menu dropdown-menu-clean dropdown-menu-navbar-autopos dropdown-fadeindown end-0 p-0 mt-2 w-300">
                  <div class="dropdown-header p-4">1 new notification</div>
                  <div class="dropdown-divider"></div>
                  <div class="max-vh-50 scrollable-vertical">
                    <!-- notifications content -->
                  </div>
                  <div class="dropdown-divider mb-0"></div>
                  <a href="#" class="prefix-icon-ignore dropdown-footer dropdown-custom-ignore fw-medium py-3">
                    View all
                  </a>
                </div>

              </li>

              <!-- account -->
              <li class="list-inline-item mx-1 dropdown">

                <a href="#" id="dropdownAccountOptions" class="btn btn-sm btn-icon btn-light dropdown-toggle rounded-circle" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">
                  <span class="small fw-bold">JD</span>
                </a>

                <div aria-labelledby="dropdownAccountOptions" class="dropdown-menu dropdown-menu-clean dropdown-menu-navbar-autopos dropdown-menu-invert dropdown-fadeindown p-0 mt-2 w-300">

                  <!-- user detail -->
                  <div class="dropdown-header bg-primary bg-gradient rounded rounded-bottom-0 text-white small p-4">
                    <span class="d-block fw-medium text-truncate">John Doe</span>
                    <span class="d-block smaller fw-medium text-truncate">john.doe@gmail.com</span>
                    <span class="d-block smaller"><b>Last Login:</b> <span data-timestamp="2019-09-03 01:48">2019-09-03 01:48</span></span>
                  </div>

                  <div class="dropdown-divider mb-3"></div>

                  <a href="#" class="dropdown-item text-truncate">
                    <span class="fw-medium">My profile</span>
                    <small class="d-block text-muted smaller">account settings and more</small>
                  </a>

                  <div class="dropdown-divider mb-0 mt-3"></div>

                  <a href="#" class="prefix-icon-ignore dropdown-footer dropdown-custom-ignore fw-medium py-3 px-4">
                    <i class="fi fi-power float-start"></i>
                    Log Out
                  </a>
                </div>

              </li>

              <!-- navigation toggler (mobile) -->
              <li class="list-inline-item d-inline-block d-lg-none">
                <button class="btn p-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMainNav" aria-controls="navbarMainNav" aria-expanded="false" aria-label="Toggle navigation">
                  <i class="fi fi-bars m-0"></i>
                </button>
              </li>

            </ul>
            <!-- /options -->

          </nav>

        </div>
        <!-- /Navbar -->

      </header>
      <!-- /Header -->


      <!-- content -->
      <div id="wrapper_content" class="d-flex flex-fill">

        <!-- sidebar -->
        <aside id="aside-main" class="aside-start aside-hide-xs bg-white shadow-sm d-flex flex-column px-2 h-auto">

          <!-- sidebar : logo -->
          <div class="py-2 px-3 mb-3 mt-1">
            <a href="{{ url_for('index') }}">
              <img src="{{ url_for('static', filename='images/logo/logo_dark.svg') }}" width="110" height="60" alt="...">
            </a>
          </div>
          <!-- /sidebar : logo -->

          <!-- sidebar : navigation -->
          <div class="aside-wrapper scrollable-vertical scrollable-styled-light align-self-baseline h-100 w-100">

            <nav class="nav-deep nav-deep-sm nav-deep-light">
              <ul class="nav flex-column">
                {% block sidebar %}
                <li class="nav-item active">
                  <a class="nav-link" href="{{ url_for('index') }}">
                    <i class="fi fi-home me-2"></i>
                    <span>Dashboard</span>
                  </a>
                </li>

                <li class="nav-item">
                  <a class="nav-link" href="{{ url_for('users') }}">
                    <i class="fi fi-people me-2"></i>
                    <span>Users</span>
                  </a>
                </li>

                <li class="nav-item">
                  <a class="nav-link" href="{{ url_for('posts') }}">
                    <i class="fi fi-document me-2"></i>
                    <span>Posts</span>
                  </a>
                </li>


                <li class="nav-title mt-5">
                  <h6 class="mb-0 smaller text-muted text-uppercase">MANAGEMENT</h6>
                </li>

                <li class="nav-item">
                  <a class="nav-link" href="#" target="_blank" rel="noopener">
                    <i class="fi fi-settings me-2"></i>
                    <span>Settings</span>
                  </a>
                </li>

                <li class="nav-item">
                  <a class="nav-link" href="#">
                    <i class="fi fi-document me-2"></i>
                    <span>Reports</span>
                  </a>
                </li>
                {% endblock %}
              </ul>
            </nav>

          </div>
          <!-- /sidebar : navigation -->

          <!-- sidebar : footer -->
          <div class="d-flex align-self-baseline w-100 py-3 px-3 border-top border-light small">

            <p class="d-inline-grid gap-auto-3 mb-0">
              <svg class="text-gray-600" width="22px" height="22px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.052 512.052" fill="currentColor">
                <path d="M208.026,16.026c-114.7,0-208,78.9-208,176c0,39.8,15.7,77.9,44.5,108.9l-39.8,39.8c-4.6,4.6-6,11.5-3.5,17.4c2.5,6,8.3,9.9,14.8,9.9h192c114.7,0,208-78.9,208-176S322.726,16.026,208.026,16.026z"></path>
                <path opacity="0.5" d="M467.526,428.926c28.8-30.9,44.5-69.1,44.5-108.9c0-49.8-24.6-94.9-64-126.9c-0.9,114.1-108.2,206.9-240,206.9h-89.2c34.5,56.9,104.6,96,185.2,96h192c6.5,0,12.3-3.9,14.8-9.9c2.5-6,1.1-12.9-3.5-17.4L467.526,428.926z"></path>
                <path fill="#ffffff" d="M304.026,144.026h-192c-8.8,0-16,7.2-16,16s7.2,16,16,16h192c8.8,0,16-7.2,16-16S312.826,144.026,304.026,144.026z"></path>
                <path fill="#ffffff" d="M240.026,208.026h-128c-8.8,0-16,7.2-16,16s7.2,16,16,16h128c8.8,0,16-7.2,16-16S248.826,208.026,240.026,208.026z"></path>
              </svg>
              <a href="#" class="link-normal text-dashed">Need help?</a>
            </p>

          </div>
          <!-- /sidebar : footer -->

        </aside>
        <!-- /sidebar -->

        <!-- main -->
        <main id="middle" class="flex-fill mx-auto">
          {% block content %}{% endblock %}
        </main>
        <!-- /main -->

      </div>
      <!-- /content -->

      <!-- footer -->
      <footer id="footer" class="bg-white shadow">
        <div class="p-3">

          <span class="small fw-medium">&copy; Smarty Inc</span>

          <div class="d-inline-block float-end dropdown">
            <ul class="list-inline m-0">

              <!-- LANGUAGE -->
              <li class="dropdown list-inline-item m-0">

                <a id="topDDLanguage" href="#" class="d-inline-block" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">
                  <i class="flag flag-us"></i>
                  <span class="small px-2">English</span>
                </a>

                <div aria-labelledby="topDDLanguage" class="dropdown-menu dropdown-menu-clean shadow-lg small m-0 max-vh-50 scrollable-vertical dropdown-menu-right">
                  <a href="#" class="dropdown-item text-primary-hover active">
                    <i class="flag flag-us"></i>
                    English
                  </a>
                  <a href="#" class="dropdown-item text-primary-hover">
                    <i class="flag flag-de"></i>
                    German
                  </a>
                  <a href="#" class="dropdown-item text-primary-hover">
                    <i class="flag flag-fr"></i>
                    Francaise
                  </a>
                </div>

              </li>
              <!-- /LANGUAGE -->

            </ul>
          </div>

        </div>
      </footer>
      <!-- /footer -->

    </div><!-- /#wrapper -->

    <!-- Core javascripts -->
    <script src="{{ url_for('static', filename='js/core.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/vendor_bundle.min.js') }}"></script>

    <!-- Relative Time Helper -->
    <script>
      function formatRelativeTime(timestamp) {
        // Handle both string and Date objects
        const inputDate = typeof timestamp === 'string' ? new Date(timestamp) : timestamp;
        const now = new Date();

        // Check if date is valid
        if (isNaN(inputDate.getTime())) {
          return timestamp; // Return original if invalid
        }

        const diffInMs = now - inputDate;
        const diffInSeconds = Math.floor(diffInMs / 1000);
        const diffInMinutes = Math.floor(diffInSeconds / 60);
        const diffInHours = Math.floor(diffInMinutes / 60);
        const diffInDays = Math.floor(diffInHours / 24);

        // Less than 1 minute
        if (diffInSeconds < 60) {
          return "Just now";
        }

        // Less than 1 hour
        if (diffInMinutes < 60) {
          return diffInMinutes === 1 ? "1 minute ago" : `${diffInMinutes} minutes ago`;
        }

        // Less than 24 hours
        if (diffInHours < 24) {
          return diffInHours === 1 ? "1 hour ago" : `${diffInHours} hours ago`;
        }

        // Yesterday (less than 48 hours but more than 24)
        if (diffInDays === 1) {
          return "Yesterday";
        }

        // Less than 7 days
        if (diffInDays < 7) {
          return `${diffInDays} days ago`;
        }

        // For older dates, return formatted date
        const options = {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit'
        };
        return inputDate.toLocaleDateString(undefined, options);
      }

      // Auto-update relative timestamps on page load
      document.addEventListener('DOMContentLoaded', function() {
        // Find all elements with data-timestamp attribute
        const timestampElements = document.querySelectorAll('[data-timestamp]');

        timestampElements.forEach(element => {
          const timestamp = element.getAttribute('data-timestamp');
          const relativeTime = formatRelativeTime(timestamp);
          element.textContent = relativeTime;

          // Store original timestamp in title for hover tooltip
          element.title = timestamp;
        });

        // Update timestamps every minute
        setInterval(() => {
          timestampElements.forEach(element => {
            const timestamp = element.getAttribute('data-timestamp');
            const relativeTime = formatRelativeTime(timestamp);
            element.textContent = relativeTime;
          });
        }, 60000); // Update every minute
      });
    </script>

    {% block scripts %}{% endblock %}

  </body>
</html>
